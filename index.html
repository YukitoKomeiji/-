<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#2563eb" />
<title>ドライバー締め作業 計算ツール</title>
<style>
  :root{--bg:#f6f9ff;--card:#fff;--ink:#0f172a;--muted:#667085;--line:#e5e7eb;--accent:#2563eb;--ok:#16a34a;--warn:#ef4444}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,"Hiragino Kaku Gothic ProN","Yu Gothic UI",Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--ink)}
  .wrap{max-width:980px;margin:24px auto;padding:0 16px}
  .card{background:var(--card);border-radius:16px;box-shadow:0 6px 20px rgba(2,6,23,.06);padding:18px;margin-bottom:16px}
  h1{font-size:22px;margin:0 0 8px}
  h2{font-size:18px;margin:0 0 10px}
  .grid{display:grid;gap:12px}
  @media(min-width:860px){.cols-2{grid-template-columns:1fr 1fr}.cols-3{grid-template-columns:repeat(3,1fr)}}
  label{font-size:12px;color:var(--muted);display:block;margin:0 0 6px}
  input[type=number],input[type=text],select{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:10px;background:#fff;outline:none}
  input:focus,select:focus{border-color:#93c5fd;box-shadow:0 0 0 4px rgba(37,99,235,.08)}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .seg{display:flex;gap:6px;flex-wrap:wrap}
  .seg input{display:none}
  .seg label{border:1px solid var(--line);padding:8px 10px;border-radius:999px;cursor:pointer;color:#111827;user-select:none}
  .seg input:checked+label{border-color:var(--accent);background:#eff6ff;color:#1d4ed8}
  .out{font-weight:700}
  .muted{color:var(--muted)}
  .kpi{background:#f9fafb;border:1px dashed var(--line);border-radius:12px;padding:12px}
  .btn{padding:10px 14px;border-radius:10px;border:1px solid var(--line);background:#fff;cursor:pointer}
  .btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
  .footer{color:var(--muted);font-size:12px;text-align:center;margin-top:8px}
  .mono{font-variant-numeric:tabular-nums}
  .notice{font-size:12px;color:#1f2937;background:#eef2ff;border:1px solid #c7d2fe;border-radius:10px;padding:8px 10px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ドライバー締め作業 計算ツール</h1>
      <!-- 説明は非表示のまま -->
      <p class="muted" style="margin:6px 0 0; display:none;">GitHub Pagesで配信可能なスタンドアロン版。入力：売上・経費・決済。自動計算：<b>2種給料</b>・<b>1種給料</b>・<b>残金</b>。ポイントカードは<b>1枚=500円</b>で控除します。</p>
      <p class="notice" style="display:none">給料計算は100円単位で<b>切り上げ</b>処理されます（例：7,581円 → 7,600円）。</p>
    </div>

    <div class="card">
      <h2>勤務条件</h2>
      <div class="grid cols-2">
        <div>
          <label>勤務時間</label>
          <div class="seg">
            <input type="radio" id="t-full" name="shift" value="full"><label for="t-full">フル</label>
            <input type="radio" id="t-mid" name="shift" value="middle"><label for="t-mid">ミドル</label>
            <input type="radio" id="t-half" name="shift" value="half"><label for="t-half">ハーフ</label>
          </div>
        </div>
        <div>
          <label>人員構成</label>
          <div class="seg">
            <input type="radio" id="p-21" name="pair" value="2_1"><label for="p-21">2種＋1種</label>
            <input type="radio" id="p-22" name="pair" value="2_2"><label for="p-22">2種＋2種</label>
            <input type="radio" id="p-2d" name="pair" value="2_d"><label for="p-2d">2種＋配車</label>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>入力</h2>
      <div class="grid cols-3">
        <div>
          <label>売上（円）</label>
          <input type="number" id="sales" min="0" step="1" placeholder="例：15000" />
        </div>
        <div>
          <label>ガソリン（円）</label>
          <input type="number" id="gas" min="0" step="1" value="0" />
        </div>
        <div>
          <label>クレジット（円）</label>
          <input type="number" id="credit" min="0" step="1" value="0" />
        </div>
        <div>
          <label>ペイペイ（円）</label>
          <input type="number" id="paypay" min="0" step="1" value="0" />
        </div>
        <div>
          <!-- 補足文削除済み -->
          <label>ポイントカード（枚）</label>
          <input type="number" id="pointCnt" min="0" step="1" value="0" />
        </div>
        <div>
          <label>エアクルネット（円）</label>
          <input type="number" id="aircle" min="0" step="1" value="0" />
        </div>
      </div>
      <div class="row" style="margin-top:12px">
        <button class="btn primary" onclick="recalc()">計算する</button>
        <button class="btn" onclick="clearAll()">入力クリア</button>
      </div>
    </div>

   <div class="card">
  <h2>
    結果
    <span id="resultInfo" class="muted" style="font-size:14px; margin-left:8px;"></span>
  </h2>
  <div class="grid cols-3">

        <div class="kpi">
          <div class="muted" id="labL">2種給料</div>
          <div class="out mono" id="outL">0 円</div>
        </div>
        <div class="kpi">
          <div class="muted" id="labR">1種給料</div>
          <div class="out mono" id="outR">0 円</div>
        </div>
        <div class="kpi">
          <div class="muted">残金</div>
          <div class="out mono" id="remain">0 円</div>
        </div>
      </div>
    </div>

    <div class="footer">© レイ運転代行｜締め作業ヘルパー v1.4</div>
  </div>

<script>
const $ = (id)=>document.getElementById(id);
const toInt = (v)=> Math.max(0, Math.floor(Number(v||0)));
const ceil100 = (v)=> Math.ceil(v/100)*100; // ← 100円単位切り上げ

const MIN2 = {full:7200, middle:5400, half:3600};
const MIN1 = {full:6400, middle:4800, half:3200};

function getPair(){
  return document.querySelector('input[name="pair"]:checked').value;
}
function getShift(){
  return document.querySelector('input[name="shift"]:checked').value;
}

function recalc(){
  const sales=toInt($('sales').value);
  const gas=toInt($('gas').value);
  const credit=toInt($('credit').value);
  const paypay=toInt($('paypay').value);
  const pointCnt=toInt($('pointCnt').value);
  const aircle=toInt($('aircle').value);
  const shift=getShift();
  const pair=getPair();

  // 1人あたりの基準額（切り上げ後・最低保証反映）
  const rate2 = ceil100(sales*0.30);
  const rate1 = ceil100(sales*0.25);
  const base2 = Math.max(rate2, MIN2[shift]);
  const base1 = Math.max(rate1, MIN1[shift]);

  // 表示用（常に1人分を表示）
  let labL='2種給料', labR='1種給料';
  let outLeft=base2, outRight=base1;

  // 控除用の人数
  let n2=1, n1=1;

  if (pair==='2_2'){
    labL='2種給料'; labR='2種給料';
    outLeft=base2; outRight=base2;
    n2=2; n1=0;
  } else if (pair==='2_d'){
    labL='2種給料'; labR='配車給料';
    outLeft=base2; outRight=base2; // 配車も同額扱い
    n2=2; n1=0;
  } else { // 2_1
    labL='2種給料'; labR='1種給料';
    outLeft=base2; outRight=base1;
    n2=1; n1=1;
  }

  // 残金計算は人数分で控除
  const pointAmt=pointCnt*500;
  const totalWage = base2*n2 + base1*n1;
  const deduct=gas + totalWage + credit + paypay + pointAmt + aircle;
  const remain=sales-deduct;

  // 出力
  $('labL').textContent = labL;
  $('labR').textContent = labR;
  $('outL').textContent = outLeft.toLocaleString()+' 円';
  $('outR').textContent = outRight.toLocaleString()+' 円';
  $('remain').textContent = remain.toLocaleString()+' 円';
}

function clearAll(){
  ['sales','gas','credit','paypay','pointCnt','aircle'].forEach(id=>$(id).value='');
  ['outL','outR','remain'].forEach(id=>$(id).textContent='0 円');
  $('labL').textContent='2種給料';
  $('labR').textContent='1種給料';
}
</script>
</body>
</html>
